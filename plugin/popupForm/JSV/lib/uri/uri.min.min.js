if(typeof exports==="undefined"){exports={}}if(typeof require!=="function"){require=function(b){return exports}}(function(){var br=function(a){var c=arguments[0],b=1,d=arguments[b];while(d){c=c.slice(0,-1)+d.slice(1);d=arguments[++b]}return c},aG=function(a){return"(?:"+a+")"},aV="[A-Za-z]",bf="[\\x0D]",aS="[0-9]",bJ="[\\x22]",bw=br(aS,"[A-Fa-f]"),bG="[\\x0A]",aZ="[\\x20]",bE=aG("%"+bw+bw),bv="[\\:\\/\\?\\#\\[\\]\\@]",bD="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",bj=br(bv,bD),bb=br(aV,aS,"[\\-\\.\\_\\~]"),aU=aG(aV+br(aV,aS,"[\\+\\-\\.]")+"*"),aM=aG(aG(bE+"|"+br(bb,bD,"[\\:]"))+"*"),a7=aG(aG("25[0-5]")+"|"+aG("2[0-4]"+aS)+"|"+aG("1"+aS+aS)+"|"+aG("[1-9]"+aS)+"|"+aS),bx=aG(a7+"\\."+a7+"\\."+a7+"\\."+a7),bg=aG(bw+"{1,4}"),bt=aG(aG(bg+"\\:"+bg)+"|"+bx),bz=aG(br(bb,bD,"[\\:]")+"+"),ba=aG("v"+bw+"+\\."+br(bb,bD,"[\\:]")+"+"),by=aG("\\["+aG(bz+"|"+ba)+"\\]"),bi=aG(aG(bE+"|"+br(bb,bD))+"*"),aT=aG(by+"|"+bx+"|"+bi),a3=aG(aS+"*"),aQ=aG(aG(aM+"@")+"?"+aT+aG("\\:"+a3)+"?"),aK=aG(bE+"|"+br(bb,bD,"[\\:\\@]")),a5=aG(aK+"*"),bF=aG(aK+"+"),bH=aG(aG(bE+"|"+br(bb,bD,"[\\@]"))+"+"),aX=aG(aG("\\/"+a5)+"*"),aL=aG("\\/"+aG(bF+aX)+"?"),bq=aG(bH+aX),bk=aG(bF+aX),aW=aG(""),aP=aG(aX+"|"+aL+"|"+bq+"|"+bk+"|"+aW),aJ=aG(aG(aK+"|[\\/\\?]")+"*"),a4=aG(aG(aK+"|[\\/\\?]")+"*"),bu=aG(aG("\\/\\/"+aQ+aX)+"|"+aL+"|"+bk+"|"+aW),a1=aG(aU+"\\:"+bu+aG("\\?"+aJ)+"?"+aG("\\#"+a4)+"?"),bc=aG(aG("\\/\\/"+aQ+aX)+"|"+aL+"|"+bq+"|"+aW),aH=aG(bc+aG("\\?"+aJ)+"?"+aG("\\#"+a4)+"?"),aF=aG(a1+"|"+aH),bo=aG(aU+"\\:"+bu+aG("\\?"+aJ)+"?"),aI=new RegExp("^"+aG("("+a1+")|("+aH+")")+"$"),bA=new RegExp("^("+aU+")\\:"+aG(aG("\\/\\/("+aG("("+aM+")@")+"?("+aT+")"+aG("\\:("+a3+")")+"?)")+"?("+aX+"|"+aL+"|"+bk+"|"+aW+")")+aG("\\?("+aJ+")")+"?"+aG("\\#("+a4+")")+"?$"),be=new RegExp("^(){0}"+aG(aG("\\/\\/("+aG("("+aM+")@")+"?("+aT+")"+aG("\\:("+a3+")")+"?)")+"?("+aX+"|"+aL+"|"+bq+"|"+aW+")")+aG("\\?("+aJ+")")+"?"+aG("\\#("+a4+")")+"?$"),bp=new RegExp("^("+aU+")\\:"+aG(aG("\\/\\/("+aG("("+aM+")@")+"?("+aT+")"+aG("\\:("+a3+")")+"?)")+"?("+aX+"|"+aL+"|"+bk+"|"+aW+")")+aG("\\?("+aJ+")")+"?$"),bd=new RegExp("^"+aG("\\#("+a4+")")+"?$"),bn=new RegExp("^"+aG("("+aM+")@")+"?("+aT+")"+aG("\\:("+a3+")")+"?$"),bC=new RegExp(br("[^]",aV,aS,"[\\+\\-\\.]"),"g"),a0=new RegExp(br("[^\\%\\:]",bb,bD),"g"),bm=new RegExp(br("[^\\%]",bb,bD),"g"),a9=new RegExp(br("[^\\%\\/\\:\\@]",bb,bD),"g"),a2=new RegExp(br("[^\\%\\/\\@]",bb,bD),"g"),az=new RegExp(br("[^\\%]",bb,bD,"[\\:\\@\\/\\?]"),"g"),bh=az,a6=new RegExp(br("[^]",bb,bD),"g"),bl=new RegExp(bb,"g"),aE=new RegExp(br("[^\\%]",bb,bj),"g"),a8=new RegExp(bE+"+","g"),aN=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/i,bs=/^\.\.?\//,ay=/^\/\.(\/|$)/,aA=/^\/\.\.(\/|$)/,aC=/^\.\.?$/,aD=/^\/?.*?(?=\/|$)/,aB=("").match(/(){0}/)[1]===undefined,aO=function(b){var a=b.charCodeAt(0);if(a<128){return"%"+a.toString(16).toUpperCase()}else{if((a>127)&&(a<2048)){return"%"+((a>>6)|192).toString(16).toUpperCase()+"%"+((a&63)|128).toString(16).toUpperCase()}else{return"%"+((a>>12)|224).toString(16).toUpperCase()+"%"+(((a>>6)&63)|128).toString(16).toUpperCase()+"%"+((a&63)|128).toString(16).toUpperCase()}}},bB=function(d){var c="",b=0,a,e;while(b<d.length){a=parseInt(d.substr(b+1,2),16);if(a<128){e=String.fromCharCode(a);if(e.match(bl)){c+=e}else{c+=d.substr(b,3)}b+=3}else{if((a>191)&&(a<224)){c+=d.substr(b,6);b+=6}else{c+=d.substr(b,9);b+=9}}}return c},aR=function(c){var b="",e=0,a,f,d;while(e<c.length){a=parseInt(c.substr(e+1,2),16);if(a<128){b+=String.fromCharCode(a);e+=3}else{if((a>191)&&(a<224)){f=parseInt(c.substr(e+4,2),16);b+=String.fromCharCode(((a&31)<<6)|(f&63));e+=6}else{f=parseInt(c.substr(e+4,2),16);d=parseInt(c.substr(e+7,2),16);b+=String.fromCharCode(((a&15)<<12)|((f&63)<<6)|(d&63));e+=9}}}return b},bK=function(a){return a===undefined?"undefined":(a===null?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase())},bI=function(){this.errors=[]},aY=exports;bI.prototype={scheme:undefined,authority:undefined,userinfo:undefined,host:undefined,port:undefined,path:undefined,query:undefined,fragment:undefined,reference:undefined,errors:undefined};aY.SCHEMES={};aY.parse=function(b,d){var c,e=new bI(),a;b=b?b.toString():"";d=d||{};if(d.reference==="suffix"){b=(d.scheme?d.scheme+":":"")+"//"+b}c=b.match(aI);if(c){if(c[1]){c=b.match(bA)}else{c=b.match(be)}}if(!c){if(!d.tolerant){e.errors.push("URI is not strictly valid.")}c=b.match(aN)}if(c){if(aB){e.scheme=c[1];e.authority=c[2];e.userinfo=c[3];e.host=c[4];e.port=parseInt(c[5],10);e.path=c[6]||"";e.query=c[7];e.fragment=c[8];if(isNaN(e.port)){e.port=c[5]}}else{e.scheme=c[1]||undefined;e.authority=(b.indexOf("//")!==-1?c[2]:undefined);e.userinfo=(b.indexOf("@")!==-1?c[3]:undefined);e.host=(b.indexOf("//")!==-1?c[4]:undefined);e.port=parseInt(c[5],10);e.path=c[6]||"";e.query=(b.indexOf("?")!==-1?c[7]:undefined);e.fragment=(b.indexOf("#")!==-1?c[8]:undefined);if(isNaN(e.port)){e.port=(b.match(/\/\/.*\:(?:\/|\?|\#|$)/)?c[4]:undefined)}}if(!e.scheme&&!e.authority&&!e.path&&!e.query){e.reference="same-document"}else{if(!e.scheme){e.reference="relative"}else{if(!e.fragment){e.reference="absolute"}else{e.reference="uri"}}}if(d.reference&&d.reference!=="suffix"&&d.reference!==e.reference){e.errors.push("URI is not a "+d.reference+" reference.")}a=aY.SCHEMES[(e.scheme||d.scheme||"").toLowerCase()];if(a&&a.parse){a.parse(e,d)}}else{e.errors.push("URI can not be parsed.")}return e};aY._recomposeAuthority=function(a){var b=[];if(a.userinfo!==undefined||a.host!==undefined||typeof a.port==="number"){if(a.userinfo!==undefined){b.push(a.userinfo.toString().replace(a0,aO));b.push("@")}if(a.host!==undefined){b.push(a.host.toString().toLowerCase().replace(bm,aO))}if(typeof a.port==="number"){b.push(":");b.push(a.port.toString(10))}}return b.length?b.join(""):undefined};aY.removeDotSegments=function(a){var b=[],c;while(a.length){if(a.match(bs)){a=a.replace(bs,"")}else{if(a.match(ay)){a=a.replace(ay,"/")}else{if(a.match(aA)){a=a.replace(aA,"/");b.pop()}else{if(a==="."||a===".."){a=""}else{c=a.match(aD)[0];a=a.slice(c.length);b.push(c)}}}}}return b.join("")};aY.serialize=function(b,d){var e=[],a,c;d=d||{};a=aY.SCHEMES[b.scheme||d.scheme];if(a&&a.serialize){a.serialize(b,d)}if(d.reference!=="suffix"&&b.scheme){e.push(b.scheme.toString().toLowerCase().replace(bC,""));e.push(":")}b.authority=aY._recomposeAuthority(b);if(b.authority!==undefined){if(d.reference!=="suffix"){e.push("//")}e.push(b.authority);if(b.path&&b.path.charAt(0)!=="/"){e.push("/")}}if(b.path){c=aY.removeDotSegments(b.path.toString().replace(/%2E/ig,"."));if(b.scheme){c=c.replace(a9,aO)}else{c=c.replace(a2,aO)}if(b.authority===undefined){c=c.replace(/^\/\//,"/%2F")}e.push(c)}if(b.query){e.push("?");e.push(b.query.toString().replace(az,aO))}if(b.fragment){e.push("#");e.push(b.fragment.toString().replace(bh,aO))}return e.join("").replace(a8,bB).replace(/%[0-9A-Fa-f]{2}/g,function(f){return f.toUpperCase()})};aY.resolveComponents=function(e,b,d,a){var c=new bI();if(!a){e=aY.parse(aY.serialize(e,d),d);b=aY.parse(aY.serialize(b,d),d)}d=d||{};if(!d.tolerant&&b.scheme){c.scheme=b.scheme;c.authority=b.authority;c.userinfo=b.userinfo;c.host=b.host;c.port=b.port;c.path=aY.removeDotSegments(b.path);c.query=b.query}else{if(b.authority!==undefined){c.authority=b.authority;c.userinfo=b.userinfo;c.host=b.host;c.port=b.port;c.path=aY.removeDotSegments(b.path);c.query=b.query}else{if(!b.path){c.path=e.path;if(b.query!==undefined){c.query=b.query}else{c.query=e.query}}else{if(b.path.charAt(0)==="/"){c.path=aY.removeDotSegments(b.path)}else{if(e.authority!==undefined&&!e.path){c.path="/"+b.path}else{if(!e.path){c.path=b.path}else{c.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+b.path}}c.path=aY.removeDotSegments(c.path)}c.query=b.query}c.authority=e.authority;c.userinfo=e.userinfo;c.host=e.host;c.port=e.port}c.scheme=e.scheme}c.fragment=b.fragment;return c};aY.resolve=function(c,a,b){return aY.serialize(aY.resolveComponents(aY.parse(c,b),aY.parse(a,b),b,true),b)};aY.normalize=function(a,b){if(typeof a==="string"){return aY.serialize(aY.parse(a,b),b)}else{if(bK(a)==="object"){return aY.parse(aY.serialize(a,b),b)}}return a};aY.equal=function(c,a,b){if(typeof c==="string"){c=aY.serialize(aY.parse(c,b),b)}else{if(bK(c)==="object"){c=aY.serialize(c,b)}}if(typeof a==="string"){a=aY.serialize(aY.parse(a,b),b)}else{if(bK(a)==="object"){a=aY.serialize(a,b)}}return c===a};aY.escapeComponent=function(a){return a&&a.toString().replace(a6,aO)};aY.unescapeComponent=function(a){return a&&a.toString().replace(a8,aR)};exports.pctEncChar=aO;exports.pctDecChars=aR;exports.Components=bI;exports.URI=aY;exports.pctEncChar=aO;exports.pctDecChars=aR;exports.Components=bI;exports.URI={SCHEMES:aY.SCHEMES,parse:aY.parse,removeDotSegments:aY.removeDotSegments,serialize:aY.serialize,resolveComponents:aY.resolveComponents,resolve:aY.resolve,normalize:aY.normalize,equal:aY.equal,escapeComponent:aY.escapeComponent,unescapeComponent:aY.unescapeComponent}}());